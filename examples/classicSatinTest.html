<!DOCTYPE html>
<html>
    <head>
        <title>Classic Satin Example</title>
        <script src="../dist/stitch.global.js"></script>
        <script>window.Stitch || document.write('<script src="https://unpkg.com/@stitchables/stitchjs/dist/stitch.global.js">\x3C/script>')</script>
    </head>

<body>
<script>
  const pattern = new Stitch.Core.Pattern(400, 400);

  const vertices = [
    new Stitch.Math.Vector(10, 10), new Stitch.Math.Vector(60, 60),
    new Stitch.Math.Vector(100, 10), new Stitch.Math.Vector(100, 60),
    new Stitch.Math.Vector(300, 10), new Stitch.Math.Vector(300, 60),
    new Stitch.Math.Vector(390, 10), new Stitch.Math.Vector(340, 60),
    new Stitch.Math.Vector(390, 100), new Stitch.Math.Vector(340, 100),
    new Stitch.Math.Vector(390, 300), new Stitch.Math.Vector(340, 300),
    new Stitch.Math.Vector(390, 390), new Stitch.Math.Vector(340, 340),
    new Stitch.Math.Vector(300, 390), new Stitch.Math.Vector(300, 340),
    new Stitch.Math.Vector(100, 390), new Stitch.Math.Vector(100, 340),
    new Stitch.Math.Vector(10, 390), new Stitch.Math.Vector(60, 340),
    new Stitch.Math.Vector(10, 300), new Stitch.Math.Vector(60, 300),
    new Stitch.Math.Vector(10, 100), new Stitch.Math.Vector(60, 100),
    new Stitch.Math.Vector(10, 10), new Stitch.Math.Vector(60, 60),
  ];

  const options = {
    startPosition: new Stitch.Math.Vector(0, 400),
    endPosition: new Stitch.Math.Vector(400, 0),
    densityMm: 0.6,
    travelLengthMm: 3,
    underlays: [
      {
        type: 'CONTOUR',
        stitchLengthMm: 1.5,
        capInsetMm: 5,
        sideInsetMm: 5
      },
      {
          type: 'CENTER_LINE',
          stitchLengthMm: 1.5,
          capInsetMm: 5
      },
      {
          type: 'ZIGZAG',
          densityMm: 1.5,
          stitchLengthMm: 1.5,
          capInsetMm: 5,
          sideInsetMm: 5
      },
    ]
  };

  const satinRun = new Stitch.Core.Runs.ClassicSatin(vertices, options);


  const thread = pattern.addThread(0, 0, 0);
  thread.addRun(satinRun);

  let canvas = Stitch.Graphics.getCanvas(pattern, window.innerWidth, window.innerHeight, 3);
  canvas.setAttribute('style', 'margin: auto; position: absolute; inset: 0;');
  document.body.append(canvas);

  window.addEventListener("resize", Stitch.Browser.Utils.debounce(() => {
      canvas.remove();
      canvas = Stitch.Graphics.getCanvas(pattern, window.innerWidth, window.innerHeight, 3);
      canvas.setAttribute('style', 'margin: auto; position: absolute; inset: 0;');
      document.body.append(canvas);
  }, 10));

  let modal = Stitch.Browser.Modal.createDownloadModal(pattern, 'classicSatinExample', 10, 500);
  document.body.appendChild(modal.container);
  window.addEventListener('click', (e) => { if (e.target === modal.container) modal.close(); });
  window.addEventListener("keydown", (e) => { if (e.code === "KeyD") { modal.open(); }});

</script>
</body>

</html>
