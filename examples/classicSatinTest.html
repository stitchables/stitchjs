<!DOCTYPE html>
<html>
    <head>
        <title>Classic Satin Example</title>
        <script src="../dist/stitch.global.js"></script>
        <script>window.Stitch || document.write('<script src="https://unpkg.com/@stitchables/stitchjs/dist/stitch.global.js">\x3C/script>')</script>
    </head>

<body>
<script>
  const pattern = new Stitch.Core.Pattern(400, 400);

  const vertices = [
    new Stitch.Math.Vector(200 + 100 * Math.cos(0 * 2 * Math.PI / 3), 200 + 100 * Math.sin(0 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 150 * Math.cos(0 * 2 * Math.PI / 3), 200 + 150 * Math.sin(0 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 100 * Math.cos(1 * 2 * Math.PI / 3), 200 + 100 * Math.sin(1 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 150 * Math.cos(1 * 2 * Math.PI / 3), 200 + 150 * Math.sin(1 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 100 * Math.cos(2 * 2 * Math.PI / 3), 200 + 100 * Math.sin(2 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 150 * Math.cos(2 * 2 * Math.PI / 3), 200 + 150 * Math.sin(2 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 100 * Math.cos(0 * 2 * Math.PI / 3), 200 + 100 * Math.sin(0 * 2 * Math.PI / 3)),
    new Stitch.Math.Vector(200 + 150 * Math.cos(0 * 2 * Math.PI / 3), 200 + 150 * Math.sin(0 * 2 * Math.PI / 3)),
  ];
  const startPosition = new Stitch.Math.Vector(200 + 125 * Math.cos(0 * 2 * Math.PI / 3), 200 + 125 * Math.sin(0 * 2 * Math.PI / 3));
  const endPosition = new Stitch.Math.Vector(200 + 125 * Math.cos(2 * 2 * Math.PI / 3), 200 + 125 * Math.sin(2 * 2 * Math.PI / 3));

  // const vertices = [
  //     new Stitch.Math.Vector(33, 313), new Stitch.Math.Vector(64, 335),
  //     new Stitch.Math.Vector(166, 188), new Stitch.Math.Vector(189, 203),
  //     new Stitch.Math.Vector(214, 98), new Stitch.Math.Vector(240, 98),
  //     new Stitch.Math.Vector(152, 49), new Stitch.Math.Vector(151, 18),
  //     new Stitch.Math.Vector(108, 104), new Stitch.Math.Vector(78, 100),
  //     new Stitch.Math.Vector(182, 185), new Stitch.Math.Vector(168, 204),
  //     new Stitch.Math.Vector(326, 331), new Stitch.Math.Vector(299, 340)
  // ];
  // const endPosition = Stitch.Math.Utils.lineSegmentIntersection(vertices[2], vertices[3], vertices[10], vertices[11]);
  // const startPosition = vertices[6];

  const thread = pattern.addThread(0, 0, 0);
  thread.addRun(new Stitch.Core.Runs.ClassicSatin(vertices, 0.4, 3, startPosition, endPosition));

  let canvas = Stitch.Graphics.getCanvas(pattern, window.innerWidth, window.innerHeight, 3);
  canvas.setAttribute('style', 'margin: auto; position: absolute; inset: 0;');
  document.body.append(canvas);

  window.addEventListener("resize", Stitch.Browser.Utils.debounce(() => {
      canvas.remove();
      canvas = Stitch.Graphics.getCanvas(pattern, window.innerWidth, window.innerHeight, 3);
      canvas.setAttribute('style', 'margin: auto; position: absolute; inset: 0;');
      document.body.append(canvas);
  }, 10));

  let modal = Stitch.Browser.Modal.createDownloadModal(pattern, 'classicSatinExample', 10, 500);
  document.body.appendChild(modal.container);
  window.addEventListener('click', (e) => { if (e.target === modal.container) modal.close(); });
  window.addEventListener("keydown", (e) => { if (e.code === "KeyD") { modal.open(); }});

</script>
</body>

</html>
